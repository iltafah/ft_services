#server {
#        listen 80 default_server;
#        listen [::]:80 default_server;
#        listen 443 ssl http2 default_server;
#        listen [::]:443 ssl http2 default_server;
#        ssl_certificate /etc/ssl/certs/nginx-selfsigned.crt;
#        ssl_certificate_key /etc/ssl/private/nginx-selfsigned.key;
#
#        # New root location
#        location / {
#                root /var/www/localhost/htdocs;
#                #return 301 https://$host$request_uri;
#                # return 404;
#        }
#        # You may need this to prevent return 404 recursion.
#        location = /404.html {
#                internal;
#        }
#}

server { # Non-SSL configuration
    #listen 80 default_server;
    #listen [::]:80 default_server;
    listen 80;
    return 301 https://$host$request_uri;
}

server { # SSL configuration
    listen 443 ssl http2;
    #listen 443 ssl http2 default_server;
    #listen [::]:443 ssl http2 default_server;

    ssl_certificate /etc/ssl/certs/nginx-selfsigned.crt;
    ssl_certificate_key /etc/ssl/private/nginx-selfsigned.key;

    root /var/www/localhost/htdocs;
    
    #server_name $host;
    location /wordpress {
        return 307 http://$host:5050;
    }
    #rewrite ^/(wordpress)$ http://$host:5050 redirect;
    
    location /phpmyadmin {
            proxy_pass http://192.168.99.240:5000;
            proxy_set_header X-Forwarded-Proto https;
    }


    # location /phpmyadmin/ {
    #         #index index.php
    #         proxy_pass http://192.168.99.240:5000/;
    #         proxy_set_header X-Forwarded-Proto https;
    #         #proxy_redirect index.php/ phpmyadmin/index.php
    # }
    
}